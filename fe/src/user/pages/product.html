<style>
  .product {
    padding: 10px;
    border: 1px solid #ccc;
    border-radius: 5px;
}

.discount-label {
    color: blue;
    margin-left: 5px;
}

.original-price {
    text-decoration: line-through;
    color: gray;
    margin-left: 10px;
}

</style>
<!-- sidebar + content -->
<section style="margin-top: 82px;" class="container-fluid" ng-init="loadPage();refreshDataProduct()">
    <div style="display: flex; justify-content: center;">
      <div class="category-container">
        <div class="heading-data__title" id="headingTitle">
          DANH MỤC SẢN PHẨM
        </div>
        <div class="category-body">
          <div class="col-md-4">
            <div class="category-data" id="categoryDataContainer">
              <ul>
                <li ng-repeat="category in dataFill.categoryList">
                  <a ng-href="#!product?categoryId={{category.id}}" class="text-dark">{{category.name}}</a>
                </li>
              </ul>
            </div>
          </div>
          <button class="btn btn-primary" ng-click="goToOfView()" ng-show="isAdmin">Chức năng Admin</button>
        </div>
        <div class="d-flex justify-content-start" style="width: 32%;">
          <div style="border-radius: 10px; width: 100%;" class="input-group">
            <div class="form-outline">
              <input style="border-bottom: 1px solid #cdcdcd;" type="search" ng-click="openOverlaySearch()" class="form-control" readonly />
              <label class="form-label">Tìm kiếm sản phẩm</label>
            </div>
            <button type="button" class="btn btn-primary shadow-0" onclick="openOverlay()">
              <i class="fas fa-search fa-lg"></i>
            </button>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Sidebar and Content -->
    <div class="row">
      <!-- sidebar -->
      <div style="padding: 46px;" class="col-lg-2">
        <div class="collapse d-lg-block mb-5" id="navbarSupportedContent">
          
          <!-- Màu sắc -->
          <div class="accordion-item">
            <h5 ng-click="toggleSection('colors')">Màu sắc</h5>
            <div id="panelsStayOpen-collapseTwo" class="accordion-collapse collapse show" aria-labelledby="headingTwo">
              <div class="accordion-body" ng-show="sections.colors">
                <div class="row">
                  <div class="col-md-3" ng-repeat="color in colors">
                    <div class="color-circle" ng-style="{ 'background-color': color.colorCode }"
                      ng-class="{ 'btn-selected2': color.isSelected }" ng-click="updateSelectedColors(color)">
                    </div>
                    <p class="center-text">{{color.name}}</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          <hr>
  
          <!-- Kích cỡ -->
          <div class="accordion-item">
            <h5 ng-click="toggleSection('sizes')">Kích cỡ</h5>
            <div id="panelsStayOpen-collapseThree" class="accordion-collapse collapse show" aria-labelledby="headingThree">
              <div class="accordion-body" ng-show="sections.sizes">
                <div class="row">
                  <div style="margin-bottom: 4px;" class="col-md-3" ng-repeat="size in sizes">
                    <label class="btn btn-white mb-1 px-1" style="width: 60px; border: 1px solid #ccc;" ng-class="{ 'btn-selected': size.isSelected }" ng-click="updateSelectedSizes(size)">
                      {{ size.name }}
                    </label>
                  </div>
                </div>
              </div>
            </div>
          </div>
  
          <hr>
  
          <!-- Chất liệu -->
          <div class="accordion-item">
            <h5 ng-click="toggleSection('materials')">Chất liệu</h5>
            <div id="panelsStayOpen-collapseFour" class="accordion-collapse collapse show" aria-labelledby="headingFour">
              <div class="accordion-body" ng-show="sections.materials">
                <div class="row">
                  <div class="col-md-12">
                    <div ng-repeat="material in materials" class="form-check">
                      <input type="checkbox" class="form-check-input" id="{{ material.id }}" ng-model="material.isSelected" ng-true-value="true" ng-false-value="false" ng-click="updateSelectedMaterials(material)" />
                      <label class="form-check-label" for="{{ material.id }}">{{ material.name }}</label>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
  
          <hr>
  
          <!-- Vòng tay -->
          <div class="accordion-item">
            <h5 ng-click="toggleSection('wrists')">Vòng tay</h5>
            <div id="panelsStayOpen-collapseFive" class="accordion-collapse collapse show" aria-labelledby="headingFive">
              <div class="accordion-body" ng-show="sections.wrists">
                <div class="row">
                  <div class="col-md-12">
                    <div ng-repeat="wrist in wrists" class="form-check">
                      <input type="checkbox" class="form-check-input" id="{{ wrist.id }}" ng-model="wrist.isSelected" ng-true-value="true" ng-false-value="false" ng-click="updateSelectedWrists(wrist)" />
                      <label class="form-check-label" for="{{ wrist.id }}">{{ wrist.name }}</label>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
  
          <hr>
  
          <!-- Cổ áo -->
          <div class="accordion-item">
            <h5 ng-click="toggleSection('collars')">Cổ áo</h5>
            <div id="panelsStayOpen-collapseSix" class="accordion-collapse collapse show" aria-labelledby="headingSix">
              <div class="accordion-body" ng-show="sections.collars">
                <div class="row">
                  <div class="col-md-12">
                    <div ng-repeat="collar in collars" class="form-check">
                      <input type="checkbox" class="form-check-input" id="{{ collar.id }}" ng-model="collar.isSelected" ng-true-value="true" ng-false-value="false" ng-click="updateSelectedCollars(collar)" />
                      <label class="form-check-label" for="{{ collar.id }}">{{ collar.name }}</label>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
  
          <hr>
  
          <!-- Thương hiệu -->
          <div class="accordion-item">
            <h5 ng-click="toggleSection('brands')">Thương hiệu</h5>
            <div id="panelsStayOpen-collapseSeven" class="accordion-collapse collapse show" aria-labelledby="headingSeven">
              <div class="accordion-body" ng-show="sections.brands">
                <div class="row">
                  <div class="col-md-12">
                    <div ng-repeat="brand in brands" class="form-check">
                      <input type="checkbox" class="form-check-input" id="{{ brand.id }}" ng-model="brand.isSelected" ng-true-value="true" ng-false-value="false" ng-click="updateSelectedBrands(brand)" />
                      <label class="form-check-label" for="{{ brand.id }}">{{ brand.name }}</label>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
  
        </div>
      </div>
      
      <!-- content -->
      <div style="padding: 46px;" class="col-lg-10">
        <header class="d-sm-flex align-items-center border-bottom mb-4 pb-3">
          <strong class="d-block py-2">{{ products.length }} Kết quả</strong>
          <div class="ms-auto">
            <select class="form-select d-inline-block w-auto border pt-1" ng-model="selectedSortType" ng-change="loadPage()">
              <option value="0">Mới nhất</option>
              <option value="1">Bán chạy</option>
              <option value="2">Giá thấp đến cao</option>
              <option value="3">Giá cao đến thấp</option>
            </select>
          </div>
        </header>
  
        <div class="row">
          <div style="margin-bottom: 30px;" class="col-md-4" ng-repeat="product in products">
              <div class="product">
                  <h3>{{ product.productName }}</h3>
                  <div ng-if="product.promotionalPrice">
                      <span>{{ formatCurrency(product.promotionalPrice )}}₫</span>
                  </div>
                  <div ng-if="product.saleValue">
                      <span ng-if="product.discountType === 1">{{  product.saleValue }}₫</span>
                      <span ng-if="product.discountType === 2">{{ ( product.saleValue) }}%</span>
                      <span class="original-price">{{formatCurrency(product.productPrice )}}₫</span>
                  </div>
                  <div ng-if="!product.promotionalPrice && !product.saleValue">
                      <span>{{ formatCurrency(product.productPrice )}}₫</span>
                  </div>
              </div>
          </div>
      </div>

      <h1>{{totalPages}}</h1>
      <h1>{{currentPage}}</h1>
      <div class="row text-center">
        <div class="col-md-12" ng-if="totalPages > 1">
            <ul class="pagination">
                <li ng-class="{disabled: currentPage === 0}">
                    <a href="" ng-click="setCurrentPage(0)">
                        First
                    </a>
                </li>
                <li ng-class="{disabled: currentPage === 0}">
                    <a href="" ng-click="setCurrentPage(currentPage - 1)">
                        Previous
                    </a>
                </li>
    
                {{ currentPage + 1 }}
    
                <li ng-class="{disabled: currentPage === totalPages - 1}">
                    <a href="" ng-click="setCurrentPage(currentPage + 1)">
                        Next
                    </a>
                </li>
                <li ng-class="{disabled: currentPage === totalPages - 1}">
                    <a href="" ng-click="setCurrentPage(totalPages - 1)">
                        Last
                    </a>
                </li>
            </ul>
        </div>
    </div>
      
      
  
      </div>
    </div>
  </section>
  