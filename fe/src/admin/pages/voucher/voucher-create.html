<div class="container">
    <div class="row">
        <div class="col-6">
            <form name="formAddVoucher" ng-submit="formAddVoucher.$valid && addVoucher()" novalidate>
                <div class="modal-header">
                    <h5 class="modal-title">Thêm mới voucher</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"
                        aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-6">
                            <div class="form-group">
                                <label>Mã</label>
                                <input type="text" name="addCode" class="form-control"
                                    ng-change="checkDuplicateCode()" ng-model="formInputVoucher.code"
                                    ng-required="true">

                                <span ng-show="formAddVoucher.$submitted">
                                    <div ng-show="formAddVoucher.addCode.$invalid"
                                        class="error-message text-danger form-text">
                                        Mã không được để trống</div>
                                </span>
                                <span ng-show="formAddVoucher.$submitted || duplicateCodeError">
                                    <div ng-show="duplicateCodeError"
                                        class="error-message text-danger form-text">
                                        Mã voucher đã tồn tại
                                    </div>
                                </span>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="form-group">
                                <label>Tên</label>
                                <input type="text" name="addName" class="form-control"
                                    ng-change="checkDuplicateName()" ng-model="formInputVoucher.name"
                                    ng-required="true">

                                <span ng-show="formAddVoucher.$submitted">
                                    <div ng-show="formAddVoucher.addName.$invalid"
                                        class="error-message text-danger form-text">
                                        Tên không được để trống</div>
                                </span>
                                <span ng-show="formAddVoucher.$submitted || duplicateNameError">
                                    <div ng-show="duplicateNameError"
                                        class="error-message text-danger form-text">
                                        Tên voucher đã tồn tại
                                    </div>
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-6">
                            <div class="form-group">
                                <label>Loại</label>
                                <select name="addType" class="form-select"
                                    ng-model="formInputVoucher.discountType"
                                    ng-change="discountTypeChangeAdd()">
                                    <option ng-value="1">Giảm theo %</option>
                                    <option ng-value="2">Giảm theo số tiền</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="form-group">
                                <label>Giá trị</label>
                                <div class="input-group">
                                    <input type="number" name="addValue" class="form-control" min="0"
                                        oninput="this.value = !!this.value && Math.abs(this.value) >= 0 ? Math.abs(this.value) : null"
                                        max="{{formInputVoucher.discountType == '1' ? '100' : ''}}"
                                        ng-model="formInputVoucher.value" ng-required="true">
                                    <span ng-if="formInputVoucher.discountType == 1"
                                        class="input-group-text" id="basic-addon2">%</span>
                                    <span ng-if="formInputVoucher.discountType == 2"
                                        class="input-group-text" id="basic-addon2">đ</span>
                                </div>
                                <span ng-show="formAddVoucher.$submitted">
                                    <div ng-show="formAddVoucher.addValue.$invalid"
                                        class="error-message text-danger form-text">
                                        <div ng-show="formAddVoucher.addValue.$error.max">
                                            Giá trị không được > 100%</div>

                                        <div ng-show="formAddVoucher.addValue.$error.required">
                                            Giá trị không được trống</div>
                                    </div>
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-6">
                            <div class="form-group">
                                <label>Giá trị tối thiểu HD</label>
                                <input type="number" name="addMinBill" class="form-control"
                                    oninput="this.value = !!this.value && Math.abs(this.value) >= 0 ? Math.abs(this.value) : 0"
                                    ng-model="formInputVoucher.minimumTotalAmount" ng-required="true">

                                <span ng-show="formAddVoucher.$submitted">
                                    <div ng-show="formAddVoucher.addMinBill.$invalid"
                                        class="error-message text-danger form-text">
                                        Giá trị tối thiểu HD không được để trống</div>
                                </span>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="form-group">
                                <label>Giá trị giảm tối đa</label>
                                <div><input type="number" name="addMaxReVa" class="form-control"
                                        id="maximumReductionValue" min="0"
                                        oninput="this.value = !!this.value && Math.abs(this.value) >= 0 ? Math.abs(this.value) : 0"
                                        ng-model="formInputVoucher.maximumReductionValue"
                                        ng-disabled="formInputVoucher.discountType == 2 ? true : fasle"
                                        ng-required="true">

                                    <span ng-show="formAddVoucher.$submitted">
                                        <div ng-show="formAddVoucher.addMaxReVa.$invalid && formInputVoucher.discountType == 1"
                                            class="error-message text-danger form-text">
                                            Giá trị giảm không được để trống</div>
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-6">
                            <div class="form-group">
                                <label>Số lượng</label>
                                <input type="number" name="addQuantity" class="form-control" min="0"
                                    oninput="this.value = !!this.value && Math.abs(this.value) >= 0 ? Math.abs(this.value) : null"
                                    ng-model="formInputVoucher.quantity" ng-required="true">

                                <span ng-show="formAddVoucher.$submitted">
                                    <div ng-show="formAddVoucher.addQuantity.$invalid"
                                        class="error-message text-danger form-text">
                                        Số lượng không được để trống</div>
                                </span>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="form-group">
                                <label>Số lượt sử dụng</label>
                                <input type="number" name="addNumberOfUses" class="form-control" min="1"
                                    oninput="this.value = !!this.value && Math.abs(this.value) >= 0 ? Math.abs(this.value) : null"
                                    ng-model="formInputVoucher.numberOfUses" ng-required="true">

                                <span ng-show="formAddVoucher.$submitted">
                                    <div ng-show="formAddVoucher.addNumberOfUses.$invalid"
                                        class="error-message text-danger form-text">
                                        Số lượt sử dụng không được để trống</div>
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group">
                            <label>Mô tả</label>
                            <input type="text" name="addDescribe" class="form-control"
                                ng-model="formInputVoucher.describe" ng-required="true">

                            <span ng-show="formAddVoucher.$submitted">
                                <div ng-show="formAddVoucher.addDescribe.$invalid"
                                    class="error-message text-danger form-text">
                                    Mô tả không được để trống</div>
                            </span>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-6">
                            <div class="form-group">
                                <label>Ngày bắt đầu</label>
                                <input type="datetime-local" name="addStartDate" class="form-control"
                                    max="{{formInputVoucher.endDate}}" ng-model="formInputVoucher.startDate"
                                    ng-change="updateStartDateMax()" ng-required="true">
                                <span ng-show="formAddVoucher.$submitted">
                                    <div ng-show="formAddVoucher.addStartDate.$error.required"
                                        class="error-message text-danger form-text">
                                        Ngày bắt đầu không được để trống</div>
                                </span>
                                <span ng-show="formAddVoucher.$submitted">
                                    <div ng-show="formAddVoucher.addStartDate.$error.max"
                                        class="error-message text-danger form-text">
                                        Ngày bắt đầu không được nhỏ hơn ngày kết thúc</div>
                                </span>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="form-group">
                                <label>Ngày kết thúc</label>
                                <input type="datetime-local" name="addEndDate" class="form-control"
                                    min="{{formInputVoucher.startDate}}" ng-model="formInputVoucher.endDate"
                                    ng-change="updateEndDateMin()" ng-required="true">

                                <span ng-show="formAddVoucher.$submitted">
                                    <div ng-show="formAddVoucher.addEndDate.$error.required"
                                        class="error-message text-danger form-text">
                                        Ngày kết thúc không được để trống</div>
                                </span>
                                <span ng-show="formAddVoucher.$submitted">
                                    <div ng-show="formAddVoucher.addEndDate.$error.min"
                                        class="error-message text-danger form-text">
                                        Ngày kết thúc không được nhỏ hơn ngày bắt đầu</div>
                                </span>
                            </div>
                        </div>
                    </div>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                    <button type="submit" class="btn btn-success">Add</button>
                </div>
            </form>
        </div>
        <div class="col-6">
            <table class="table table-striped table-hover">
                <thead>
                    <tr>
                        <!-- <th><span class="custom-checkbox">
                                <input type="checkbox" id="selectAll">
                                <label for="selectAll"></label></th> -->
                        <th scope="col-1">Mã</th>
                        <th scope="col-2">Tên</th>
                        <th scope="col-2">Giá trị</th>
                        <th scope="col-1">Loại</th>
                        <th scope="col-1">Số lượng</th>
                        <th scope="col-2">Trạng thái</th>
                    </tr>
                </thead>

                <tbody style="text-transform: none; ">
                    <tr ng-repeat="v in vouchers">
                        <!-- <th><span class="custom-checkbox">
                                <input type="checkbox" id="checkbox1" name="option[]" value="1">
                                <label for="checkbox1"></label></th> -->
                        <td scope="col-1">{{v.code}}</td>
                        <td scope="col-2">{{v.name}}</td>
                        <td scope="col-2">{{v.value}}</td>
                        <td scope="col-1">{{v.discountType == 1 ? '%' : 'vnđ'}}</td>
                        <td scope="col-1">{{v.quantity}}</td>
                        <!-- <td>{{v.status == 1 ? 'Hoạt động' : ' Ngừng'}}</td> -->
                        <td scope="col-2" ng-switch="v.status" style="font-size: 18px;">
                            <span ng-switch-when="1">
                                <div class="badge bg-success text-wrap" style="width: 65%;">
                                    Đang diễn ra
                                </div>
                            </span>
                            <span ng-switch-when="2">
                                <div class="badge bg-danger text-wrap" style="width: 65%;">
                                    Đã hết hạn
                                </div>
                            </span>
                            <span ng-switch-when="3">
                                <div class="badge bg-warning text-wrap" style="width: 65%;">
                                    Sắp diễn ra
                                </div>
                            </span>
                            <span ng-switch-when="4">
                                <div class="badge bg-secondary text-wrap" style="width: 65%;">
                                    Tạm ngưng
                                </div>
                            </span>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>