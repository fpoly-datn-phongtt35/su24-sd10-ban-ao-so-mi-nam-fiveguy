<title>Voucher List</title>
<!-- <link rel="stylesheet" href="styles.css"> -->

<!-- Google Material Icons -->
<link href="https://fonts.googleapis.com/css2?family=Material+Icons" rel="stylesheet">

<!-- Bootstrap CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>

<body>

    <div class="container">
        <div style="justify-content: space-between;" class="title d-flex align-items-center">
            <div class="d-flex align-items-center">
                <span class="material-icons fs-4 me-2">view_headline</span>
                <p class="m-0">Quản Lý Lịch Sử Hóa Đơn</p>
            </div>



        </div>
        <form ng-submit="applyFiltersBillHistory()">
            <div class="search-bar">

                <!-- <label>Mã người thực hiên:</label> -->
                <input type="text" ng-model="filterBillHistory.createdBy" placeholder="Nhập người thực hiện"
                    class="form-control" />

                <!-- <label>Người thực hiên:</label> -->
                <!-- <input type="text" class="form-control" ng-model="filterBillHistory.implementer"
                    placeholder="Nhập người thực hiện " /> -->

                <!-- <label>Thời gian:</label> -->
                <input type="text" class="form-control" ng-model="filterBillHistory.createdAt"
                    placeholder="Nhập ngày tạo" />

                <select class="form-select" ng-model="filterBillHistory.type">
                    <option selected value=""> Chọn loại hóa đơn</option>
                    <option value="0">Bán Onl</option>
                    <option value="1">Bán Off</option>
                    <!-- <option value="3">Sắp diễn ra</option> -->
                    <!-- <option value="4">Tạm ngưng</option> -->
                </select>

                <!-- <label>Loại tài khoản:</label> -->
                <select class="form-select" ng-model="filterBillHistory.status">
                    <option selected value=""> Chọn trạng thái</option>
                    <option value="1">Chờ thanh toán</option>
                    <option value="2">Chờ vận chuyển</option>
                    <option value="3">Đang giao</option>
                    <option value="4">Thành công</option>
                    <option value="5">Đá hủy</option>
                    <option value="6">Dá hủy</option>
                    <option value="7">Thất bại</option>
                    <option value="8">Thát bại</option>
                    <option value="9">Chờ giao lại</option>
                    <option value="10">Đang giao lại</option>
                    <option value="11">Hoàn hàng</option>
                    <!-- <option value="4">Tạm ngưng</option> -->
                </select>
            </div>
            <div class="row justify-content-end">
                <div class="col-auto d-flex align-items-center">
                    <button type="submit" class="button-submit btn btn-primary">
                        <span class="material-icons align-middle">search</span> Tìm kiếm
                    </button>
                </div>
                <div class="col-auto d-flex align-items-center">
                    <button class="button-submit btn btn-secondary" ng-click="resetfilterBillHistory()">
                        <span class="material-icons align-middle">refresh</span> Làm mới
                    </button>
                </div>
            </div>

        </form>
        <div class="row">
            <div class="table-container">

                <table class="table table-striped table-hover">
                    <thead>
                        <tr>
                            <th scope="col-1">STT</th>
                            <th scope="col-1">Người thưc hiện</th>
                            <th scope="col-1">Ngày tạo</th>
                            <th scope="col-1">Loại đơn hàng</th>
                            <th scope="col-1">ly do</th>
                            <th scope="col-1">Trạng thái</th>
                            <th scope="col-1.5">Action</th>
                        </tr>
                    </thead>

                    <tbody>
                        <tr ng-repeat="employee in getBillHistory">
                            <td scope="col-1">
                                {{ ($index + 1) + (desiredPage != 1 ? (desiredPage * 5) : 0)
                                }}
                            </td>
                            <!-- <td scope="col-1" class="css-text-overfolow">{{employee.bill.employee.fullName}}</td> -->
                            <td scope="col-1" class="css-text-overfolow">{{employee.createdBy}}</td>
                            <td scope="col-1" class="css-text-overfolow">{{formatDateTime(employee.createdAt)}}</td>
                            <td scope="col-1" class="css-text-overfolow">{{employee.type == 0 ? 'Bán onl':'Bán Off'}}
                            </td>
                            <td scope="col-1" class="css-text-overfolow">{{employee.reason}}</td>
                            <td class="col-1.5" ng-switch="employee.bill.status">
                                <span ng-switch-when="1">
                                    <div class="badge bg-success text-wrap">
                                        Chờ thanh toán
                                    </div>
                                </span>
                                <span ng-switch-when="2">
                                    <div class="badge bg-success text-wrap">
                                        Chờ vận chuyển
                                    </div>
                                </span>
                                <span ng-switch-when="2">
                                    <div class="badge bg-success text-wrap">
                                        Đang Giao
                                    </div>
                                </span>
                                <span ng-switch-when="3">
                                    <div class="badge bg-success text-wrap">
                                        Đang Hoạt Động
                                    </div>
                                </span>
                                <span ng-switch-when="4">
                                    <div class="badge bg-danger text-wrap">
                                        Thành công
                                    </div>
                                </span>
                            </td>
                            <td scope="col-1.5">
                                <a type="button" class="edit" data-bs-toggle="modal" data-bs-target="#modalUpdate"
                                    ng-click="edit(employee)">
                                    <i class="material-icons" title="Edit">&#xE254;</i>
                                </a>
                                <a type="button" class="btn" data-bs-toggle="modal" data-bs-target=""
                                    ng-click="delete(employee)">
                                    <i class="material-icons" title="Delete">&#xE872;</i>
                                </a>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="d-flex justify-content-between align-items-center mt-4">
            <div class="d-flex align-items-center">
                <div class="ms-4 me-3 hint-text">Số lượng hiển thị:</div>
                <div>
                    <input id="size" ng-model="size" ng-change="applyFiltersBillHistory()" value="1" type="number"
                        max="100" min="1" class="form-control" style="width: 5rem;" required />
                </div>
            </div>
            <ul class="pagination">
                <li class="page-item" ng-class="{disabled: currentPage === 0}">
                    <a class="page-link" ng-click="getAllBillHistory(0)">Trang đầu</a>
                </li>
                <li class="page-item" ng-class="{disabled: currentPage === 0}">
                    <a class="page-link" ng-click="getAllBillHistory(currentPage - 1)">&lt;</a>
                </li>
                <li class="page-item" ng-repeat="page in [].constructor(totalPages) track by $index"
                    ng-class="{active: $index === currentPage}">
                    <a class="page-link" ng-click="currentPage !== $index && getAllBillHistory($index)">{{$index +
                        1}}</a>
                </li>
                <li class="page-item" ng-class="{disabled: currentPage === totalPages - 1}">
                    <a class="page-link" ng-click="getAllBillHistory(currentPage + 1)">&gt;</a>
                </li>
                <li class="page-item" ng-class="{disabled: currentPage === totalPages - 1}">
                    <a class="page-link" ng-click="getAllBillHistory(totalPages - 1)">Trang cuối</a>
                </li>
            </ul>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrnWDOY1hgFnB+Rph6ceE8TXw9pqAYF9HLjt3ymEv4np7n8Xl16fXGbyAwQ4T"
        crossorigin="anonymous"></script>
    <script src="https://kit.fontawesome.com/yourkit.js" crossorigin="anonymous"></script>

</body>

</html>